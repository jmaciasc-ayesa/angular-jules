<div class="pokemon-detail-container">
  <a routerLink="/" class="back-link">&laquo; Back to Pokedex</a>

  @if (pokemonDetail$ | async; as pokemon) {
    <div> <!-- This div replaces the original *ngIf container -->
      <h2>{{ pokemon.name | titlecase }} (#{{ pokemon.id }})</h2>
      
      <div class="pokemon-layout">
        <div class="pokemon-image-section">
          @if (pokemon.sprites?.front_default) {
            <img [src]="pokemon.sprites.front_default" [alt]="pokemon.name" class="pokemon-image">
          } @else {
            <p class="no-image-available">Image not available</p>
          }
        </div>

        <div class="pokemon-info-section">
          <h3>Details</h3>
          <p><strong>Height:</strong> {{ pokemon.height ? pokemon.height / 10 : 'N/A' }} m</p>
          <p><strong>Weight:</strong> {{ pokemon.weight ? pokemon.weight / 10 : 'N/A' }} kg</p>

          <h3>Types</h3>
          <ul>
            @for (typeInfo of pokemon.types; track typeInfo.type.name) {
              <li [class]="'type-' + typeInfo.type.name">
                {{ typeInfo.type.name | titlecase }}
              </li>
            }
          </ul>

          <h3>Abilities</h3>
          <ul>
            @for (abilityInfo of pokemon.abilities; track abilityInfo.ability.name) {
              <li>
                {{ abilityInfo.ability.name | titlecase }}
                @if (abilityInfo.is_hidden) {
                  <span>(Hidden)</span>
                }
              </li>
            }
          </ul>
        </div>
      </div>

      <h3>Base Stats</h3>
      <ul class="pokemon-stats">
        @for (statInfo of pokemon.stats; track statInfo.stat.name) {
          <li>
            <span class="stat-name">{{ statInfo.stat.name | titlecase }}:</span>
            <div class="stat-bar-container">
              <div class="stat-bar" [style.width.%]="(statInfo.base_stat / 255) * 100">
                {{ statInfo.base_stat }}
              </div>
            </div>
          </li>
        }
      </ul>
    </div>
  } @else {
    <!-- This is the equivalent of #loadingOrError template -->
    @if (error) { <!-- Assuming 'error' is a component property accessible here -->
      <div class="error-message">{{ error }}</div>
    } @else {
      <div class="loading-message">Loading Pokemon details...</div>
    }
  }
</div>
